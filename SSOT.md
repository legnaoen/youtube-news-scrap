# SSOT – Web Content & YouTube Subtitle Manager
---
> **🎯 이 문서의 목적**: AI와의 바이브코딩에서 맥락 유지, 불필요한 코드 재작성 방지, 안정적 기능 보호

## 1. 프로젝트 개요

- **목적:** YouTube 동영상의 자막과 웹 페이지 콘텐츠를 효율적으로 추출, 관리, 편집할 수 있는 웹 애플리케이션 개발
- **배경:** 
  1. YouTube 콘텐츠 제작자들의 자막 관리 및 편집 작업 효율화 필요성
  2. 외국 뉴스 기사나 긴 웹 콘텐츠를 빠르게 파악하고 정리할 필요성
- **주요 기능:**
  1. **YouTube 자막 관리**:
     - YouTube 동영상 자막 추출
     - 자막 편집 및 관리
     - 자막 포맷 변환 및 내보내기
  2. **웹 콘텐츠 추출**:
     - URL 기반 웹 페이지 콘텐츠 추출
     - HTML을 마크다운으로 변환
     - 추출된 콘텐츠 저장 및 관리
- **적용 범위:** 
  - YouTube 콘텐츠 제작자, 자막 편집자, 번역가
  - 뉴스 기사, 블로그 등 구조화된 웹 콘텐츠 사용자
- **신경 쓸 점:** 
  - YouTube API 사용 제한 및 정책 준수
  - 웹사이트별 다양한 HTML 구조 대응
  - 대용량 자막/콘텐츠 파일 처리 성능
  - 마크다운 변환 시 문서 구조 보존
  - 사용자 친화적 인터페이스
- **협업자/관리자:** [프로젝트 관리자명]

---

## 2. 바이브 코딩 운영·실행 지침

1. 작업은 "부분 수정/최소 변경"을 원칙으로 한다. 전체 파일 재작성은 예외적 상황만 허용.
2. 작업 범위·목적·제약을 먼저 명확히 한다.
3. 필요한 코드/정보만 입력·수정 요청한다.
4. 불필요한 반복, 탐색, 포맷팅, 자동화 명령은 최소화한다.
5. 작업 전후에는 SSOT(설계/운영 문서)를 반드시 확인·갱신한다.
6. AI 작업 결과는 항상 직접 확인·검토하고, 문제가 있으면 즉시 수정·피드백한다.
7. 모든 작업/자동화는 "최소 입력, 최대 명확성" 원칙을 따른다.
8. 예외상황(전체 재작성, 구조 변경 등)은 반드시 직접 확인/동의 후 진행한다.

---

## 3. 진행관리/변경 이력

| 날짜       | 작성자      | 변경 내용           | 비고                    |
| ---------- | ----------- | ------------------ | ----------------------- |
| 2024-03-26 | AI Assistant| SSOT 최초작성      | 프로젝트 기본 구조 정립  |
| 2024-03-26 | AI Assistant| 웹 콘텐츠 기능 추가 | 프로젝트 범위 확장      |
| 2024-03-26 | AI Assistant| 라이브러리 설치    | cheerio, turndown 추가  |
| 2024-03-26 | AI Assistant| API 구현          | 웹 콘텐츠 추출 API 구현  |
| 2024-03-26 | AI Assistant| UI 확장           | URL 입력 컴포넌트 확장   |
| 2024-03-26 | AI Assistant| 뷰어 개선         | 마크다운 뷰어 메타데이터 지원 |
| 2024-03-26 | AI Assistant| URL 입력 개선     | 자동 타입 감지 기능 추가 |
| 2024-03-26 | AI Assistant| 파일 저장 개선    | 메타데이터 저장 구조 추가 |
| 2024-03-26 | AI Assistant| 히스토리 개선     | 제목 기반 표시 및 정렬 추가 |
| 2024-03-26 | AI Assistant| 파일명 개선       | 웹 콘텐츠 파일명에 URL 경로 추가 |
| 2024-03-26 | AI Assistant| 히스토리 UI 개선  | 날짜별 그룹화 표시 추가 |
| 2024-03-26 | AI Assistant| 히스토리 관리 개선 | 최대 50개 제한 및 자동 정리 기능 추가 |

---

## 4. 기술 스택 및 아키텍처

### 4.1 백엔드
- **언어**: TypeScript/JavaScript
- **프레임워크**: Next.js 15.1.8
- **주요 라이브러리**:
  - `yt-dlp-wrap`: YouTube 동영상 및 자막 다운로드
  - `cheerio`: 웹 스크래핑 및 HTML 파싱
  - `turndown`: HTML to Markdown 변환
  - `remark`: 마크다운 처리
  - `remark-html`: HTML 변환

### 4.2 프론트엔드
- **언어**: TypeScript, HTML, CSS
- **프레임워크**: React 19.0.0
- **스타일링**: TailwindCSS 3.4.1
- **주요 컴포넌트**:
  - `@heroicons/react`: UI 아이콘

### 4.3 파일 구조
```
youtube-subtitle-manager/
├── src/
│   ├── app/                    # Next.js 앱 라우팅
│   └── components/             # React 컴포넌트
├── public/                     # 정적 파일
├── data/                      # 자막 데이터 저장
├── package.json               # 프로젝트 의존성
├── tsconfig.json             # TypeScript 설정
├── tailwind.config.ts        # Tailwind CSS 설정
└── next.config.ts            # Next.js 설정
```

---

## 5. 핵심 설계 결정사항

### 5.1 Next.js App Router 사용
- **결정내용**: Next.js의 새로운 App Router 아키텍처 채택
- **이유**: 서버 컴포넌트, 스트리밍, 중첩 레이아웃 등 최신 기능 활용
- **영향**: 향상된 성능과 개발 경험, 서버-클라이언트 컴포넌트 분리

### 5.2 TailwindCSS 채택
- **결정내용**: TailwindCSS를 스타일링 솔루션으로 사용
- **이유**: 유틸리티 우선 접근 방식, 높은 커스터마이징 가능성
- **영향**: 일관된 디자인 시스템, 빠른 UI 개발

### 5.3 히스토리 관리 시스템
- **결정내용**: 히스토리 항목 관리 방식 개선
- **주요 기능**:
  1. 날짜별 그룹화 표시
     - 오늘
     - 어제
     - 지난 7일
     - 이전
  2. 최대 항목 제한
     - 최대 50개 항목 유지
     - 초과 시 가장 오래된 항목 자동 삭제
     - 삭제 로그 기록
- **이유**: 
  - 사용자 경험 개선
  - 시스템 리소스 효율적 관리
  - 날짜 기반 콘텐츠 탐색 용이성
- **영향**: 
  - 향상된 히스토리 탐색 경험
  - 안정적인 시스템 성능 유지
  - 자동화된 저장소 관리

### 5.4 프로젝트 구성 및 실행 환경
- **결정내용**: 프로젝트 실행 환경 및 구성 요소 정의
- **주요 구성**:
  1. 실행 환경
     - Node.js 18.0.0 이상 필수
     - yt-dlp 설치 필요
     - 프로덕션 환경: Docker 지원
  2. 개발 환경 설정
     ```bash
     # 개발 서버
     npm run dev
     
     # 프로덕션 빌드
     npm run build
     npm run start
     ```
  3. 환경 변수
     - `.env` 파일을 통한 설정 관리
     - 보안 관련 설정 분리
- **이유**: 
  - 안정적인 실행 환경 보장
  - 개발/배포 프로세스 표준화
  - 보안 설정 관리 용이성
- **영향**: 
  - 일관된 개발 환경 제공
  - 배포 프로세스 자동화 가능
  - 설정 관리 효율성 향상

---

## 6. 현재 상태 및 알려진 이슈

### 6.1 ✅ 완료된 기능
- [x] 프로젝트 기본 구조 설정
- [x] Next.js 및 TypeScript 설정
- [x] TailwindCSS 통합
- [x] YouTube 자막 추출 기능 구현
- [x] 웹 콘텐츠 추출 라이브러리 설정
- [x] 웹 콘텐츠 추출 API 구현
- [x] URL 입력 컴포넌트 확장
- [x] 마크다운 변환 및 저장 기능 개발
- [x] 콘텐츠 메타데이터 표시 기능
- [x] URL 자동 타입 감지 기능
- [x] 메타데이터 기반 파일 저장
- [x] 히스토리 제목 기반 표시
- [x] 시간순 정렬 기능
- [x] 하위 호환성 지원 (레거시 파일 형식)
- [x] 웹 콘텐츠 파일명 개선 (도메인+URL 경로 포함)
- [x] 히스토리 날짜별 그룹화 (오늘/어제/지난 7일/이전)
- [x] 히스토리 최대 50개 제한 및 자동 정리

### 6.2 🔄 진행 중
- [ ] 웹사이트별 최적화 규칙 구현
- [ ] 콘텐츠 검색 및 필터링 기능
- [ ] 로깅 시스템 개선
- [ ] 에러 처리 강화
- [ ] 기존 파일 메타데이터 형식 마이그레이션
- [ ] 파일명 형식 개선 테스트 및 모니터링

### 6.3 📋 예정된 개선사항
- [ ] 자막 포맷 변환 기능
- [ ] 다국어 지원
- [ ] 사용자 인증 시스템
- [ ] 웹사이트별 커스텀 파싱 규칙 설정
- [ ] 콘텐츠 태그 및 분류 기능
- [ ] 웹사이트별 파싱 최적화
- [ ] 검색 기능 추가
- [ ] 메타데이터 편집 기능

### 6.4 🚨 알려진 이슈
- 웹 콘텐츠 파일명 변경으로 인한 기존 파일과의 호환성 확인 필요
- 특수한 URL 구조를 가진 웹사이트에 대한 파일명 생성 규칙 검증 필요

---

## 7. 운영 가이드

### 7.1 개발 환경 설정
```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm run dev

# 프로덕션 빌드
npm run build

# 프로덕션 서버 실행
npm run start
```

### 7.2 주요 엔드포인트/기능
- `/`: 메인 페이지
- `/api/subtitles`: 자막 관리 API

### 7.3 트러블슈팅
- **개발 서버 실행 오류**: `node_modules` 삭제 후 재설치
- **타입 오류**: `typescript` 버전 확인 및 `tsconfig.json` 설정 검토

---

## 8. 보안 및 제한사항

### 8.1 보안 고려사항
- YouTube API 키 보안 관리
- 사용자 데이터 보호
- CORS 정책 설정

### 8.2 성능 제한사항
- 대용량 자막 파일 처리 제한
- YouTube API 호출 제한
- 브라우저 메모리 사용량

---

## 9. 다음 단계 계획

### 9.1 단기 목표 (1-2주)
1. 웹 콘텐츠 추출 기본 기능 구현
2. URL 입력 및 결과 표시 UI 개발
3. 마크다운 변환 및 저장 기능 구현

### 9.2 중기 목표 (1-2개월)
1. 다양한 웹사이트 구조 대응
2. 콘텐츠 관리 및 검색 기능
3. 사용자 인증 시스템 통합

### 9.3 장기 목표 (3-6개월)
1. 웹사이트별 최적화된 파싱 규칙
2. 콘텐츠 자동 분류 및 태그 기능
3. API 서비스 제공

---

## 10. 코드 상태 맵 (Code Status Map)

### 10.1 🟢 안정적 코드 (절대 수정 금지)
- `next.config.ts`: 기본 Next.js 설정 ✅
- `tailwind.config.ts`: TailwindCSS 설정 ✅
- `src/components/SubtitleManager.tsx`: 기본 레이아웃 및 상태 관리 ✅
- `src/app/api/content/route.ts`: 통합 콘텐츠 API (웹 + YouTube) ✅
- `src/components/UrlInput.tsx`: URL 입력 및 자동 타입 감지 ✅
- `src/components/MarkdownViewer.tsx`: 마크다운 렌더링 및 메타데이터 표시 ✅
- `src/components/HistoryList.tsx`: 히스토리 관리 및 제목 표시 ✅

### 10.2 🟡 주의 필요 코드 (신중히 수정)
- `src/app/layout.tsx`: 전역 레이아웃 설정
- `tsconfig.json`: TypeScript 설정
- `src/app/api/content/route.ts`: 웹사이트별 파싱 규칙 개선 필요

### 10.3 🔴 문제 있는 코드 (수정 대상)
- 현재 없음

### 10.4 📝 최근 수정 내역
- 2024-03-26: 프로젝트 정리 - 불필요한 파일 제거 및 문서 구조화

---

## 11. AI 협업 가이드라인

### 11.1 매 작업 시작 시 확인사항
```
현재 상태: Next.js 프로젝트 기본 구조 설정 완료
작업 목표: YouTube 자막 관리 기능 구현
수정 금지: next.config.ts, tailwind.config.ts
예상 변경: src/app, src/components 디렉토리 내 파일들
```

### 11.2 절대 금지 행동
- ❌ 설정 파일 전체 재작성
- ❌ 프로젝트 구조 임의 변경
- ❌ 타입 정의 없는 코드 작성
- ❌ 테스트되지 않은 API 키 노출
- ❌ 보안 관련 코드 임의 수정

### 11.3 권장 작업 패턴
1. **단일 집중**: 한 번에 하나의 기능 구현
2. **타입 우선**: TypeScript 타입 정의 후 구현
3. **컴포넌트 분리**: 재사용 가능한 단위로 설계
4. **성능 고려**: 서버/클라이언트 컴포넌트 구분

### 11.4 파일 형식 가이드라인
#### 메타데이터 형식
```
---
{
  "title": "콘텐츠 제목",
  "url": "원본 URL",
  "timestamp": 1234567890,
  "type": "youtube|webpage"
}
---

콘텐츠 내용
```

#### 레거시 형식 (하위 호환성)
- 파일명에서 제목 추출
- 파일명 패턴으로 타입 구분
- 타임스탬프 기본값 0

---

## 📋 **SSOT 활용 체크리스트**

### 작업 시작 전
- [ ] 섹션 10 "코드 상태 맵" 확인
- [ ] 섹션 11.4 "작업 컨텍스트 템플릿" 작성
- [ ] 수정 금지 영역 AI에게 명시

### 작업 진행 중
- [ ] 단일 파일 집중 (여러 파일 동시 수정 금지)
- [ ] edit_file 우선 사용
- [ ] 변경사항 즉시 테스트

### 작업 완료 후
- [ ] 섹션 3 "변경 이력" 업데이트
- [ ] 섹션 10.4 "최근 수정 내역" 업데이트
- [ ] 안정적 코드가 된 경우 섹션 10.1 업데이트
- [ ] 문제 해결 시 섹션 6.4 "알려진 이슈" 갱신 